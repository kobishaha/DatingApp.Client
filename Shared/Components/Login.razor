@inject IAuthService AuthService
@inject NavigationManager Navigation

<EditForm Model="@loginModel" OnValidSubmit="@HandleLogin">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <MudTextField T="string" Label="Email" @bind-Value="loginModel.Email" />
    <MudTextField T="string" Label="Password" InputType="InputType.Password" @bind-Value="loginModel.Password" />
    <MudButton Color="Color.Primary" Variant="Variant.Filled" Type="Submit">Login</MudButton>
</EditForm>

@if (authResult != null)
{
    <MudAlert Severity="Severity.Error">@authResult.Message</MudAlert>
}

@code {
    private LoginModel loginModel = new LoginModel();
    private AuthResult? authResult;

    private async Task HandleLogin()
    {
        authResult = await AuthService.Login(loginModel);
        if (authResult.Success)
        {
            Navigation.NavigateTo("/login");
        }
    }
}
